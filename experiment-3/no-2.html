<!DOCTYPE html>
<html>
<title>Link</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="lib/css/bootstrap.min.css">
<link rel="stylesheet" href="no-2.css">
<link rel="stylesheet" href="no-2-mobile.css">
<script id="vertex-shader" type="x-shader/x-vertex">
  attribute vec4 vPosition;
attribute vec3 vNormal;
varying vec4 fColor;

uniform vec4 ambientProduct, diffuseProduct, specularProduct;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform vec4 lightPosition;
uniform float shininess;
void main()
{
    // pos is vertex position in eye coordinates

    vec3 pos = -(viewMatrix * modelMatrix * vPosition).xyz;
    
    // vector from vertex position to light source
    
    vec3 L = normalize( lightPosition.xyz - pos );
	
    vec3 E = normalize( -pos );
    vec3 H = normalize( L + E );
    
    vec4 NN = vec4(vNormal, 0);

    // Transform vertex normal into eye coordinates
    vec3 N = normalize(NN.xyz);

    // Compute diffuse reflection term (see p. 286 Angel 7th ed)
    float Kd = max( dot(L, N), 0.0 );
    vec4  diffuse  = Kd * diffuseProduct;

    // Compute specular reflection term (see p. 287 Angel 7th ed)
    float Ks = pow( max(dot(N, H), 0.0), shininess );
    vec4  specular = Ks * specularProduct;

    if( dot(L, N) < 0.0 ) {
	    specular = vec4(0.0, 0.0, 0.0, 1.0);
    }

    // Use ambient
    vec4 ambient = ambientProduct;

    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vPosition;
    fColor = ambient + diffuse +specular;
    
    fColor.a = 1.0;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">

  precision mediump float;


varying vec4 fColor;

void
main()
{
    gl_FragColor = fColor;
}
</script>

<script type="text/javascript" src="./lib/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="./lib/js/popper-1.16.0.min.js"></script>
<script type="text/javascript" src="./lib/js/bootstrap.min.js"></script>

<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>
<script type="text/javascript" src="./m4.js"></script>

<script type="text/javascript" src="./utils.js"></script>
<script type="text/javascript" src="./event-dispatcher.js"></script>

<script type="text/javascript" src="./scene-graph.js"></script>
<script type="text/javascript" src="./object-node.js"></script>
<script type="text/javascript" src="./model.js"></script>
<script type="text/javascript" src="./animation-manager.js"></script>
<script type="text/javascript" src="./renderer.js"></script>

<script type="text/javascript" src="../temp/objects-materials.js"></script>
<script type="text/javascript" src="../temp/objects-data.js"></script>
<script type="text/javascript" src="../temp/objects-vertices.js"></script>
<script type="text/javascript" src="../temp/objects-animations.js"></script>
<script type="text/javascript" src="./camera-coordinates.js"></script>

<script type="text/javascript" src="./no-2.js"></script>


<body>
  <div class="canvas-wrapper">
    <canvas tabindex="1" id="gl-canvas">
      Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>
    <div id="screen-info">
      <p id="canvas-status">Canvas aktif dipilih</p>
    </div>
  </div>
  <div id="menu-toggler-wrapper" class="show-menu">
    <button type="button" class="btn btn-primary" id="menu-toggler-button">
      <span class="button-text">Tutup</span>
      <img class="arrow" src="arrow.svg" />
    </button>
    <div class="menu">
      <div class="submenu">
        <h3 class="submenu-title">Tree Objek</h3>
        <label class="note">Bantuan: untuk memilih objek, klik kanan (pada desktop)
          atau tekan dan tahan yang lama (pada mobile)</label>
        <div id="tree">
          <div class="obj-name" id="root-node">Root</div>
          <ul>
          </ul>
        </div>
      </div>
      <div class="submenu" id="selected-object-menu">
        <h3 class="submenu-title">Pengaturan Objek yang Dipilih</h3>
        <div class="property-section">
          <h4>Translasi</h4>
          <div class="submenu-section">
            <div class="slider-container">
              <label>X<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-location-x" value="0" min="-10" max="10"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Y<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-location-y" value="0" min="-10" max="10"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Z<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-location-z" value="0" min="-10" max="10"
                class="custom-range range-animation">
            </div>
          </div>
        </div>
        <div class="property-section">
          <h4>Rotasi</h4>
          <div class="submenu-section">
            <div class="slider-container">
              <label>X<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.1" name="selected-object-rotation-x" value="0" min="-360" max="360"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Y<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.1" name="selected-object-rotation-y" value="0" min="-360" max="360"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Z<b>
                  <div class="slider-value">0</div>
                </b></label>
              <input type="range" step="0.1" name="selected-object-rotation-z" value="0" min="-360" max="360"
                class="custom-range range-animation">
            </div>
          </div>
        </div>
        <div class="property-section">
          <h4>Skala</h4>
          <div class="submenu-section">
            <div class="slider-container">
              <label>X<b>
                  <div class="slider-value">1</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-scale-x" value="1" min="-3" max="3"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Y<b>
                  <div class="slider-value">1</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-scale-y" value="1" min="-3" max="3"
                class="custom-range range-animation">
            </div>
            <div class="slider-container">
              <label>Z<b>
                  <div class="slider-value">1</div>
                </b></label>
              <input type="range" step="0.05" name="selected-object-scale-z" value="1" min="-3" max="3"
                class="custom-range range-animation">
            </div>
          </div>
        </div>
      </div>
      <div class="submenu-two-list-container">
        <div class="submenu">
          <h3 class="submenu-title">Kontrol animasi</h3>
          <button type="button" class="btn btn-primary" id="btn-animate">Mulai Animasi</button>
          <div class="slider-container" id="speed-slider">
            <label>Kecepatan animasi<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.01" name="speed" value="0" min="0" max="4" class="custom-range range-speed">
          </div>
          <div class="slider-container" id="resolution-slider">
            <label>Resolusi<b>
                <div class="slider-value">100%</div>
              </b></label>
            <input type="range" step="1" name="resolution" value="100" min="1" max="100" class="custom-range">
          </div>
        </div>
        <div class="submenu">
          <h3 class="submenu-title">Lokasi Cahaya</h3>
          <div class="slider-container">
            <label>Lorem<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.01" name="speed" value="0" min="0" max="4" class="custom-range range-speed">
          </div>
          <div class="slider-container">
            <label>Ipsum<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.01" name="speed" value="0" min="0" max="4" class="custom-range range-speed">
          </div>
          <div class="slider-container">
            <label>Dolor<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.01" name="speed" value="0" min="0" max="4" class="custom-range range-speed">
          </div>
        </div>
      </div>
      <div class="submenu-two-list-container">
        <div class="submenu" id="link-submenu">
          <h3 class="submenu-title">Gerakan Ksatria ("Link")</h3>
          <div class="slider-container">
            <label>Rotasi Tangan Kiri<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="arm.L.rotation.x" value="0" min="-45" max="135"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Tangan Kanan<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="arm.R.rotation.x" value="0" min="-45" max="135"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Pedang<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="sword_grip.rotation.x" value="0" min="-90" max="90"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Tolehan Kepala<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="head.rotation.z" value="0" min="-90" max="90"
              class="custom-range range-animation" />
          </div>
          <div class="slider-container">
            <label>Kedipan Mata<b>
                <div class="slider-value">1</div>
              </b></label>
            <input type="range" step="0.01" name="eye.scale.z" value="1" min="0" max="1"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Anggukan Kepala<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="head.rotation.x" value="0" min="-90" max="9  0"
              class="custom-range range-animation" />
          </div>
          <div class="slider-container">
            <label>Loncatan<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.01" name="body.location.z" value="0" min="-1" max="1"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Tengkurap Badan<b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="body.rotation.x" value="0" min="-90" max="90"
              class="custom-range range-animation">
          </div>
        </div>
        <!-- TODO: Change Slider Ayam-->
        <div class="submenu">
          <h3 class="submenu-title">Gerakan Ayam</h3>

          <div class="slider-container">
            <label>Rotasi Tangan Kiri: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="arm.L.rotation.x" value="0" min="-45" max="135"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Tangan Kanan: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="arm.R.rotation.x" value="0" min="-45" max="135"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Pedang: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="sword_grip.rotation.x" value="0" min="-90" max="90"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Tolehan Kepala: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="head.rotation.z" value="0" min="-90" max="9  0"
              class="custom-range range-animation" />
          </div>
          <div class="slider-container">
            <label>Kedipan Mata: <b>
                <div class="slider-value">1</div>
              </b></label>
            <input type="range" step="0.01" name="eye.scale.z" value="1" min="0" max="1"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Anggukan Kepala: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="head.rotation.x" value="0" min="-90" max="9  0"
              class="custom-range range-animation" />
          </div>
          <div class="slider-container">
            <label>Loncatan: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="body.location.z" value="0" min="0" max="0.5"
              class="custom-range range-animation">
          </div>
          <div class="slider-container">
            <label>Rotasi Badan: <b>
                <div class="slider-value">0</div>
              </b></label>
            <input type="range" step="0.1" name="body.rotation.x" value="0" min="-90" max="90"
              class="custom-range range-animation">
          </div>
        </div>
      </div>
      <div class="submenu">
        <h3 class="submenu-title">Bantuan</h3>
        <div id="help-content">
          <p>Tekan <strong>panah keyboard</strong> untuk memindahkan posisi kamera.
            <br />Tekan <strong>spasi</strong> untuk memulai/menghentikan animasi.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>

</html>